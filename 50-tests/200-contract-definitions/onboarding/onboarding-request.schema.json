{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "$id": "https://specs.digitaleuro.eu/schemas/onboarding/request/v1",
  "_header": {
    "artefact_type": "contract_definition",
    "visibility": "public",
    "audience": "everyone",
    "form": "text",
    "role": "assurance",
    "status": "normative",
    "owner": "system-quality",
    "traceability": [
      "@spec=SPEC-OB-DATA:0.1.0",
      "@spec=SPEC-OB-INT:0.1.0"
    ]
  },
  "title": "Onboarding Request Contract",
  "description": "Validates the payload for registering a new Identity Hash. Enforces privacy constraints and data formats.",
  "type": "object",
  "required": [
    "identity_hash",
    "psp_id"
  ],
  "additionalProperties": false,
  "properties": {
    "identity_hash": {
      "type": "string",
      "description": "The anonymised user identity. Must be a SHA-256 Hex string. [Trace: DAT-MSG-01, REQ-OB-FUNC-01]",
      "pattern": "^[a-f0-9]{64}$",
      "examples": [
        "9f86d081884c7d659a2feaa0c55ad015a3bf4f1b2b0b822cd15d6c15b0f00a08"
      ]
    },
    "psp_id": {
      "type": "string",
      "description": "The BIC of the requesting PSP. [Trace: DAT-MSG-02]",
      "pattern": "^[A-Z]{4}[A-Z]{2}[A-Z0-9]{2}([A-Z0-9]{3})?$",
      "examples": [
        "DEUTDEFFXXX"
      ]
    }
  }
}

